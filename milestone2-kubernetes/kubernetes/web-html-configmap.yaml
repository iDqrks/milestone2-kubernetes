apiVersion: v1
kind: ConfigMap
metadata:
  name: bv-web-html
  namespace: brent-verlinden
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
        <title>Brent Verlinden - Milestone 2</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            .container { max-width: 800px; margin: 0 auto; }
            .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
            .healthy { background: #d4edda; color: #155724; }
            .error { background: #f8d7da; color: #721c24; }
            button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Brent Verlinden has reached milestone 2!</h1>
            <div id="status">
                <div class="status">Loading...</div>
            </div>
            <button onclick="refreshData()">Refresh Data</button>
        </div>

        <script>
            async function refreshData() {
                const statusDiv = document.getElementById('status');
                
                try {
                    const response = await fetch('/api/data');
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        statusDiv.innerHTML = '<div class="status healthy">Container ID: ' + (data.container_id || 'Unknown') + '<br>Status: API Connected Successfully<br>Visits: ' + data.data.length + '</div>';
                    } else {
                        statusDiv.innerHTML = '<div class="status error">Container ID: Unknown<br>Status: API Connection Failed<br>Error: ' + data.message + '</div>';
                    }
                } catch (error) {
                    statusDiv.innerHTML = '<div class="status error">Container ID: Unknown<br>Status: API Connection Failed<br>Error: ' + error.message + '</div>';
                }
            }
            refreshData();
        </script>
    </body>
    </html>
